---
import { ClientRouter } from 'astro:transitions';
import '../styles/global.scss';

const canonicalURL = new URL(Astro.url.pathname, Astro.site);

const { title, description } = Astro.props;
---

<!-- Google tag (gtag.js) -->
<script
  is:inline
  type="text/partytown"
  src="https://www.googletagmanager.com/gtag/js?id=G-GRBB86L642"
></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GRBB86L642');
</script>

<script>
  import { applyDarkTheme } from '../logic/color-scheme';

  // Note: This has to be an event handler to ensure it runs w/ every transition
  // * See: https://docs.astro.build/en/guides/view-transitions/#script-re-execution
  document.addEventListener('astro:page-load', () => {
    applyDarkTheme();
  });
</script>

<ClientRouter />
<!-- Global Metadata -->
<meta charset='utf-8' />
<meta name='viewport' content='width=device-width,initial-scale=1' />
<link
  rel='icon'
  href='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text style=%22filter: brightness(.5) grayscale(1)%22 y=%22.9em%22 font-size=%2290%22>🐈</text></svg>'
/>

<!-- Canonical URL -->
<link rel='canonical' href={canonicalURL} />

<!-- Primary Meta Tags -->
<meta name='title' content={title} />
<meta name='description' content={description} />
<title>{title}</title>
